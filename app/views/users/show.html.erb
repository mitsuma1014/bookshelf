<h1>ユーザー詳細画面</h1>

<%= render "shared/header" %>

<div><%= image_tag @user.image.url, alt: "ユーザー画像" %></div>
<div><%= "ユーザー名：#{@user.name}" %></div>
<div><%= "プロフィール：#{@user.profile}"%></div>

<% if @user.id == @current_user.id %>
  <%= link_to "編集",[:edit, @user]%>
  <%= link_to "削除",@user, method: :delete, data:{ confirm:"ユーザー情報を削除します。よろしいですか？"} %>
<% end %>


<p><%= @user.name %>の投稿一覧</p>

<table border = "1">
  <thead>
    <tr>
      <th colspan = "2">タイトル</th>
      <th rowspan = "2">感想</th>
      <th rowspan = "2">投稿日</th>
    </tr>
    <tr>
      <th>著者</th>
      <th>ジャンル</th>
    </tr>
  </thead>
  <tbody>
    <% @reviews.each do |review|%>
    <tr>
      <td colspan = "2"><%= review.title %></td>
      <td rowspan = "2"><%= review.content %></td>
      <td rowspan = "2"><%= review.created_at %></td>
      <% if review.user_id == current_user.id %>
        <td><%= link_to "編集", [:edit,review] %></td>
      <% end %>
    </tr>
    <tr>
      <td>
      <% review.review_authors.each do |a| %>
        <%= a.author %>
      <% end %>
      </td>
      <td><%= review.genre %></td>
      <% if review.user_id == current_user.id %>
        <td><%= link_to "削除", review, method: :delete,data:{ confirm: "この投稿を削除します。よろしいですか？"} %></td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @reviews %>
<%= page_entries_info @reviews %>
